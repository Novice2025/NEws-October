<!-- Chosen Palette: Warm Neutrals & Teal/Sky Accents (Stone-50 background, Teal/Sky for interactivity and data visualization) -->
<!-- Application Structure Plan: The structure is a dashboard approach with a fixed left sidebar for navigation and quick stats, and a large main content area that dynamically switches views (Dashboard, Headlines, Vocab Hub, Quizzes). This approach was chosen because the source content is modular (news items, vocab, grammar, quizzes) and requires non-linear access, which a dashboard facilitates far better than a linear report structure. Key interactions include navigation filtering (by topic) and dynamic chart updates (vocab visualization). -->
<!-- Visualization & Content Choices: Summary: News Topics -> Goal: Organization -> Viz/Presentation Method: Filterable Card Grid -> Interaction: Topic Filter Buttons -> Justification: Allows learners to focus reading by interest/difficulty. Library/Method: HTML/Tailwind/Vanilla JS. Summary: Vocabulary Terms -> Goal: Inform/Organize -> Viz/Presentation Method: Part of Speech Frequency Bar Chart -> Interaction: Hover to see counts -> Justification: Provides quantitative insight into the structure of the learned vocabulary. Library/Method: Chart.js/Canvas. Summary: Grammar Focus -> Goal: Inform -> Viz/Presentation Method: Explainer Modal -> Interaction: Click 'View Grammar' -> Justification: Avoids screen clutter while providing detailed, focused instruction. Library/Method: HTML/Vanilla JS. -->
<!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Language Synthesis Hub - Interactive Learning Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        /* Required Chart Container Styling */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            height: 300px; /* Base height */
            max-height: 400px; /* Max height */
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .scroll-y { overflow-y: auto; }
        .draggable { cursor: grab; }
        .dropping-area { min-width: 80px; min-height: 30px; border-bottom: 2px dashed #94a3b8; margin: 0 5px; display: inline-block; vertical-align: bottom; }
        /* Custom scrollbar for aesthetic purposes */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f8f8f8; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
        /* Custom styling for buttons and filters */
        .nav-button {
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            text-align: left;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            font-weight: 600;
            background-color: #44403c; /* stone-800 -> stone-700 fallback */
            color: #d6d3d1; /* stone-300 */
        }
        .nav-button:hover {
            background-color: #57534e; /* stone-600 */
            color: #f5f5f4; /* stone-100 */
        }
        .active-nav-button {
            background-color: #0d9488; /* teal-600 */
            color: #ffffff;
        }
        .active-nav-button:hover {
            background-color: #0f766e; /* teal-700 */
        }
        .filter-button {
            padding: 0.35rem 0.75rem;
            border-radius: 0.5rem;
            border: 1px solid #d1d5db;
            background-color: #f9fafb;
            color: #4b5563;
            font-weight: 500;
            transition: all 0.2s;
        }
        .filter-button:hover {
            background-color: #e5e7eb;
        }
        .active-filter-button {
            border-color: #0ea5e9; /* sky-500 */
            background-color: #e0f2f7; /* sky-100 */
            color: #0369a1; /* sky-800 */
            font-weight: 700;
        }
        .active-filter-button:hover {
            background-color: #bae6fd; /* sky-200 */
        }
        /* Style for the inline drop area text */
        .dropping-area > span {
            display: block; /* Make the text take up the span area */
            line-height: 1.5;
            padding: 2px 4px;
            color: #64748b; /* stone-500 */
            font-size: 0.75rem;
        }
        /* Style for the input field in the quiz to maintain flow */
        #fill-in-sentences input {
            vertical-align: middle;
            min-width: 80px;
        }
    </style>
</head>
<body class="bg-stone-50 min-h-screen">

    <!-- Modal for Detailed Grammar Focus -->
    <div id="grammarModal" class="fixed inset-0 bg-gray-900 bg-opacity-70 z-50 hidden items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl p-6 md:p-8 w-full max-w-2xl transform transition-all duration-300 scale-95 opacity-0" id="grammarModalContent">
            <h3 class="text-2xl font-bold mb-4 text-sky-700">Grammar Focus: Passive Voice</h3>
            <p class="text-stone-700 mb-4">The Passive Voice is used when the focus is on the action (the verb) and the result, rather than the subject performing the action. It is often used in news reporting when the agent is unknown or less important than the event itself.</p>
            <div class="bg-sky-50 p-4 rounded-lg border border-sky-200">
                <p class="font-semibold text-sky-800 mb-2">Example from Report:</p>
                <ul class="list-disc list-inside text-stone-700">
                    <li>"The meeting **was held** in Geneva." (Focus is on the meeting)</li>
                    <li>"New medicines **are being found** by AI." (Focus is on the discovery of medicines)</li>
                </ul>
            </div>
            <button onclick="closeModal('grammarModal')" class="mt-6 w-full py-2 bg-teal-600 text-white font-semibold rounded-lg hover:bg-teal-700 transition duration-150 shadow-md">Close Explanation</button>
        </div>
    </div>

    <!-- Main Application Grid Layout -->
    <div class="flex flex-col md:flex-row min-h-screen">

        <!-- Sidebar (Left - Fixed on Desktop) -->
        <aside class="bg-stone-800 text-stone-50 w-full md:w-64 p-4 flex flex-col shadow-xl md:sticky md:top-0 h-auto md:h-screen">
            <h1 class="text-2xl font-bold text-teal-400 mb-0">Language Synthesis Hub</h1>
            <p class="text-xs text-stone-400 mb-6 italic">Created and curated by Daby</p>
            
            <!-- Navigation -->
            <nav class="flex flex-row md:flex-col space-y-0 md:space-y-2 mb-8 overflow-x-auto pb-2 md:pb-0">
                <button onclick="changeView('dashboard')" class="nav-button active-nav-button">
                    <span class="mr-2">üè†</span> Dashboard
                </button>
                <button onclick="changeView('headlines')" class="nav-button">
                    <span class="mr-2">üì∞</span> Headlines Explorer
                </button>
                <button onclick="changeView('vocab')" class="nav-button">
                    <span class="mr-2">üìä</span> Vocabulary Hub
                </button>
                <button onclick="changeView('quizzes')" class="nav-button">
                    <span class="mr-2">‚úÖ</span> Practice Quizzes
                </button>
            </nav>

            <!-- Quick Stats Widget -->
            <div class="p-4 bg-stone-700 rounded-lg text-sm mt-auto hidden md:block">
                <h4 class="font-semibold text-teal-400 mb-2 border-b border-stone-600 pb-1">Learning Stats</h4>
                <div class="flex justify-between py-1"><span>News Items Read:</span><span id="stat-read" class="font-bold text-sky-300">0</span></div>
                <div class="flex justify-between py-1"><span>Vocabulary Terms:</span><span id="stat-vocab" class="font-bold text-sky-300">0</span></div>
                <div class="flex justify-between py-1"><span>Quiz Score:</span><span id="stat-score" class="font-bold text-sky-300">0 / 0</span></div>
            </div>

        </aside>

        <!-- Main Content Area (Right - Dynamic) -->
        <main class="flex-1 p-4 md:p-8">
            <div class="max-w-4xl mx-auto">
                
                <header class="mb-8 border-b pb-4">
                    <h2 class="text-3xl font-bold text-stone-800" id="main-title"></h2>
                    <p class="text-sm text-stone-500" id="sub-title"></p>
                </header>

                <!-- Dynamic Content Container -->
                <div id="content-container">
                    <!-- Dashboard View -->
                    <section id="dashboard-view" class="view-content">
                        <p class="mb-6 text-stone-600">Welcome to your interactive learning platform. Use the sidebar to navigate the latest digest, explore vocabulary, or jump straight into practice exercises.</p>
                        
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                            <!-- Featured Card -->
                            <div class="col-span-1 md:col-span-2 bg-white rounded-xl shadow-lg p-6 border-t-4 border-teal-600">
                                <h3 class="text-xl font-bold text-stone-800 mb-3">Featured Digest: Ceasefire Negotiations</h3>
                                <p class="text-stone-600 mb-4">International negotiations have intensified this week, focusing on achieving a humanitarian ceasefire in Gaza.</p>
                                <button onclick="changeView('headlines', 'Conflict')" class="py-2 px-4 bg-teal-600 text-white rounded-lg font-semibold hover:bg-teal-700 transition duration-150">View Full Story</button>
                            </div>
                            <!-- Grammar Card -->
                            <div class="bg-white rounded-xl shadow-lg p-6 border-t-4 border-sky-600">
                                <h3 class="text-xl font-bold text-stone-800 mb-3">Grammar Lab</h3>
                                <p class="text-stone-600 mb-4">Today's focus is on the **Passive Voice**, commonly used in formal reports and news.</p>
                                <button onclick="openModal('grammarModal')" class="py-2 px-4 bg-sky-600 text-white rounded-lg font-semibold hover:bg-sky-700 transition duration-150">View Explanation</button>
                            </div>
                        </div>

                        <!-- Quick Quiz Links -->
                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <h3 class="text-xl font-bold text-stone-800 mb-3 border-b pb-2">Practice Links</h3>
                            <div class="flex flex-wrap gap-4 mt-4">
                                <button onclick="changeView('quizzes', 'fill-in')" class="py-2 px-4 bg-gray-100 border border-gray-300 rounded-lg text-stone-700 font-medium hover:bg-gray-200 transition duration-150 flex items-center">
                                    <span class="mr-2">‚úçÔ∏è</span> Fill in the Blanks
                                </button>
                                <button onclick="changeView('quizzes', 'drag-drop')" class="py-2 px-4 bg-gray-100 border border-gray-300 rounded-lg text-stone-700 font-medium hover:bg-gray-200 transition duration-150 flex items-center">
                                    <span class="mr-2">üëÜ</span> Drag & Drop
                                </button>
                            </div>
                        </div>
                    </section>

                    <!-- Headlines Explorer View -->
                    <section id="headlines-view" class="view-content hidden">
                        <p class="mb-6 text-stone-600">Explore news items, filter by topic, and interact with summaries and learning tools. Each item contains embedded vocabulary and discussion prompts.</p>
                        
                        <!-- Topic Filters -->
                        <div class="mb-6 flex flex-wrap gap-3">
                            <button onclick="filterHeadlines('All')" class="filter-button active-filter-button">All Topics</button>
                            <button onclick="filterHeadlines('Rio')" class="filter-button">Rio Initiatives</button>
                            <button onclick="filterHeadlines('Economy')" class="filter-button">Economy</button>
                            <button onclick="filterHeadlines('Culture')" class="filter-button">Culture</button>
                            <button onclick="filterHeadlines('Policy')" class="filter-button">Policy/Law</button>
                            <button onclick="filterHeadlines('Conflict')" class="filter-button">Conflict</button>
                            <button onclick="filterHeadlines('US')" class="filter-button">US Politics</button>
                        </div>

                        <!-- Headlines Grid -->
                        <div id="headlines-grid" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Headlines Cards will be injected here -->
                        </div>
                    </section>

                    <!-- Vocabulary Hub View -->
                    <section id="vocab-view" class="view-content hidden">
                        <p class="mb-6 text-stone-600">The Vocabulary Hub synthesizes all terms from the weekly digest, allowing you to quickly visualize the types of words you are learning. Check the chart below for the **Part of Speech Frequency** and the table for definitions.</p>

                        <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
                            <h3 class="text-xl font-bold text-sky-700 mb-4">Vocabulary Breakdown</h3>
                            <div class="chart-container">
                                <canvas id="vocabChart"></canvas>
                            </div>
                        </div>

                        <div class="bg-white rounded-xl shadow-lg p-6">
                            <h3 class="text-xl font-bold text-sky-700 mb-4">Master Vocabulary List</h3>
                            <div class="scroll-y max-h-96">
                                <table class="min-w-full divide-y divide-gray-200">
                                    <thead class="bg-gray-50 sticky top-0">
                                        <tr>
                                            <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Term</th>
                                            <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">POS</th>
                                            <th class="px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Definition</th>
                                        </tr>
                                    </thead>
                                    <tbody id="vocab-table-body" class="bg-white divide-y divide-gray-200">
                                        <!-- Vocab Table Rows will be injected here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </section>

                    <!-- Practice Quizzes View -->
                    <section id="quizzes-view" class="view-content hidden">
                        <p class="mb-6 text-stone-600">Test your understanding of the new vocabulary and concepts with these interactive exercises.</p>

                        <!-- Fill in the Blanks Section -->
                        <div id="fill-in-blanks" class="bg-white rounded-xl shadow-lg p-6 mb-8 border-t-4 border-teal-600">
                            <h3 class="text-xl font-bold text-teal-700 mb-4">1. Fill in the Blanks</h3>
                            <div id="fill-in-sentences" class="space-y-4 text-stone-700">
                                <!-- Sentences will be injected here -->
                            </div>
                            <div class="flex gap-4 mt-6">
                                <button onclick="checkFillInBlanks()" class="py-2 px-4 bg-teal-600 text-white rounded-lg font-semibold hover:bg-teal-700 transition duration-150 shadow-md">Check Answers</button>
                                <button onclick="resetFillInBlanks()" class="py-2 px-4 bg-gray-200 text-stone-700 rounded-lg font-semibold hover:bg-gray-300 transition duration-150">Reset</button>
                            </div>
                        </div>
                        
                        <!-- Drag and Drop Section -->
                        <div id="drag-drop" class="bg-white rounded-xl shadow-lg p-6 border-t-4 border-sky-600">
                            <h3 class="text-xl font-bold text-sky-700 mb-4">2. Drag and Drop</h3>
                            <div class="mb-6 p-3 bg-sky-50 rounded-lg">
                                <h4 class="font-semibold mb-2 text-sky-800">Available Words: (Drag these into the blanks)</h4>
                                <div id="draggable-words" class="flex flex-wrap gap-2">
                                    <!-- Draggable words will be injected here -->
                                </div>
                            </div>
                            <div id="drag-drop-sentences" class="space-y-4 text-stone-700">
                                <!-- Sentences will be injected here -->
                            </div>
                            <div class="flex gap-4 mt-6">
                                <button onclick="checkDragAndDrop()" class="py-2 px-4 bg-sky-600 text-white rounded-lg font-semibold hover:bg-sky-700 transition duration-150 shadow-md">Check Answers</button>
                            <button onclick="resetDragAndDrop()" class="py-2 px-4 bg-gray-200 text-stone-700 rounded-lg font-semibold hover:bg-gray-300 transition duration-150">Reset</button>
                            </div>
                        </div>
                    </section>

                </div>
            </div>
        </main>
    </div>

    <script>
        const NEWS_DATA = [
            {
                id: 1,
                topic: 'Rio',
                original: 'Prefeitura do Rio lan√ßa projeto ambicioso para despolui√ß√£o da Ba√≠a de Guanabara',
                simplified: 'Rio Mayor Unveils Ambitious Plan to Clean Guanabara Bay',
                summaryShort: 'The Rio de Janeiro Mayor‚Äôs Office has launched a major project aimed at cleaning up the heavily polluted Guanabara Bay, focusing on sewage treatment and better waste management.',
                summaryFull: 'The comprehensive plan, costing billions of reais, includes building new sewage treatment plants and tightening regulations on industrial dumping. Environmentalists caution that while **ambitious**, the successful implementation of these **initiatives** will take years, but the effort is viewed as **critical** for local marine life and tourism.',
                image: 'https://placehold.co/400x200/588157/fefae0?text=Guanabara+Bay+Cleanup',
                vocab: [
                    { term: 'Unveils', pos: 'Verb', definition: 'To reveal or announce (a plan, idea, or product) for the first time.', portuguese: 'Revelar, lan√ßar' },
                    { term: 'Ambitious', pos: 'Adjective', definition: 'Having or showing a strong desire and determination to succeed.', portuguese: 'Ambicioso' },
                    { term: 'Sewage', pos: 'Noun', definition: 'Waste water and refuse conveyed in sewers.', portuguese: 'Esgoto' },
                    { term: 'Initiatives', pos: 'Noun', definition: 'The action of taking the first step; new plans or strategies.', portuguese: 'Iniciativas' }
                ],
                discussion: 'What are the biggest challenges a major city like Rio faces in cleaning up its waterways?'
            },
            {
                id: 2,
                topic: 'Economy',
                original: 'Banco Central mant√©m Selic est√°vel em 10,5% ap√≥s meses de cortes',
                simplified: 'Central Bank Holds Key Interest Rate Steady Amid Inflation Concerns',
                summaryShort: 'Brazil‚Äôs Central Bank decided to keep its benchmark interest rate (Selic) at 10.5%. This decision marks a pause after months of successive cuts, aimed at battling persistent inflation.',
                summaryFull: 'The move to **hold** the rate **steady** signals the bank\'s caution **amidst** global economic headwinds and domestic price pressures. Analysts suggest the pause is temporary, but express **concerns** over the impact on economic growth in the short term.',
                image: 'https://placehold.co/400x200/3a5a40/fefae0?text=Brazil+Economy',
                vocab: [
                    { term: 'Holds', pos: 'Verb', definition: 'To keep something in a specified position; to maintain (a rate or policy).', portuguese: 'Manter, segurar' },
                    { term: 'Steady', pos: 'Adjective', definition: 'Not changing or fluctuating; stable.', portuguese: 'Est√°vel, firme' },
                    { term: 'Amidst', pos: 'Preposition', definition: 'Surrounded by; in the middle of (often used for conditions or circumstances).', portuguese: 'Em meio a, rodeado por' },
                    { term: 'Concerns', pos: 'Noun', definition: 'Matters of interest or worry; anxiety about something.', portuguese: 'Preocupa√ß√µes, quest√µes' }
                ],
                discussion: 'How does an interest rate decision affect the average person who wants to buy a house or start a business?'
            },
            {
                id: 3,
                topic: 'Culture',
                original: 'Lan√ßamento de s√©rie sobre Bossa Nova no streaming impulsiona turismo cultural',
                simplified: 'Bossa Nova Series Launch on Streaming Spurs Cultural Tourism',
                summaryShort: 'A highly anticipated new drama series about the history of Bossa Nova music has launched on a global streaming platform. Experts believe the show will greatly **spur** cultural **tourism** in Rio.',
                summaryFull: 'The series, which was filmed in iconic locations across Rio and features the music of classic artists like Tom Jobim, has received international **acclaim**. The government is planning new initiatives to capitalize on the **launch** by promoting historical music venues and beaches mentioned in the show.',
                image: 'https://placehold.co/400x200/7f4f24/fefae0?text=Bossa+Nova+Rio',
                vocab: [
                    { term: 'Spurs', pos: 'Verb', definition: 'To urge or encourage (a person or activity); to prompt or stimulate.', portuguese: 'Impulsionar, estimular' },
                    { term: 'Launch', pos: 'Noun', definition: 'The action of starting or setting in motion (a product or project).', portuguese: 'Lan√ßamento' },
                    { term: 'Anticipated', pos: 'Adjective', definition: 'Regarded as likely to happen; expected.', portuguese: 'Antecipado, esperado' },
                    { term: 'Acclaim', pos: 'Noun', definition: 'Enthusiastic public praise and approval.', portuguese: 'Aclama√ß√£o, reconhecimento' }
                ],
                discussion: 'Can popular media (like TV shows) truly influence tourism and cultural appreciation?'
            },
            {
                id: 4,
                topic: 'Policy',
                original: 'Congresso aprova novo marco fiscal com foco na sustentabilidade da d√≠vida',
                simplified: 'Congress Approves New Fiscal Framework Focused on Debt Sustainability',
                summaryShort: 'Brazil‚Äôs Congress recently **approved** a new **fiscal** **framework** designed to control public spending and ensure long-term national **sustainability**. This is a key step for the current administration.',
                summaryFull: 'The **framework** sets clear limits on how much the government can spend each year, tying expenditure increases to revenue growth. The goal is to restore investor **confidence** and maintain a healthy balance between social spending and reducing public debt, which is a common **concern** for rating agencies.',
                image: 'https://placehold.co/400x200/96b0a2/fefae0?text=Fiscal+Policy',
                vocab: [
                    { term: 'Approves', pos: 'Verb', definition: 'To officially agree to or sanction.', portuguese: 'Aprovar' },
                    { term: 'Fiscal', pos: 'Adjective', definition: 'Relating to government revenue, especially taxes.', portuguese: 'Fiscal' },
                    { term: 'Framework', pos: 'Noun', definition: 'A basic structure underlying a system, concept, or text.', portuguese: 'Estrutura, marco' },
                    { term: 'Sustainability', pos: 'Noun', definition: 'The ability to be maintained at a certain rate or level.', portuguese: 'Sustentabilidade' }
                ],
                discussion: 'Why is it difficult for a large country to balance social spending with debt control?'
            },
            // --- EXISTING HEADLINES ---
            {
                id: 5,
                topic: 'Conflict',
                original: 'Negocia√ß√µes se intensificam por cessar-fogo humanit√°rio em Gaza',
                simplified: 'Negotiations Intensify for Humanitarian Ceasefire in Gaza',
                summaryShort: 'Global powers have stepped up efforts to mediate a deal, with talks focused on a temporary **ceasefire** to allow **humanitarian** aid into the region.',
                summaryFull: 'Diplomatic **negotiations** have begun to **intensify** this week in a neutral European capital. The primary goal is securing a pause in fighting to address the severe humanitarian crisis, emphasizing the need for supplies, medical access, and safe zones for civilians.',
                image: 'https://placehold.co/400x200/ba181b/f8d7da?text=Conflict+Talks',
                vocab: [
                    { term: 'Intensify', pos: 'Verb', definition: 'To become or make more intense, strong, or serious.', portuguese: 'Intensificar' },
                    { term: 'Ceasefire', pos: 'Noun', definition: 'A temporary suspension of fighting, especially one during which peace talks take place.', portuguese: 'Cessar-fogo' },
                    { term: 'Humanitarian', pos: 'Adjective', definition: 'Seeking to promote human welfare, often related to aid in a crisis.', portuguese: 'Humanit√°rio' },
                    { term: 'Negotiations', pos: 'Noun', definition: 'Discussion aimed at reaching an agreement.', portuguese: 'Negocia√ß√µes' }
                ],
                discussion: 'What role can neutral countries play in mediating deep international conflicts?'
            },
            {
                id: 6,
                topic: 'Policy/US',
                original: 'Presidente Trump faz visita surpresa a estado chave de manufatura',
                simplified: 'President Trump Makes Surprise Visit to Key Manufacturing State',
                summaryShort: 'President Trump conducted a **surprise** visit to Ohio, a key **manufacturing** state, where he held an unannounced **rally** and **endorsed** a local candidate.',
                summaryFull: 'The President used the visit to promote his economic agenda, focusing on job creation and trade policy. He spoke at a large rally where he endorsed a candidate for the upcoming midterms, solidifying his political support in the region.',
                image: 'https://placehold.co/400x200/004d40/e0f2f1?text=Political+Rally',
                vocab: [
                    { term: 'Surprise', pos: 'Adjective', definition: 'Unexpected or causing astonishment.', portuguese: 'Surpresa' },
                    { term: 'Manufacturing', pos: 'Noun', definition: 'The making of goods on a large scale using machinery.', portuguese: 'Manufatura' },
                    { term: 'Rally', pos: 'Noun', definition: 'A mass meeting of people making a political protest or showing support for a cause.', portuguese: 'Com√≠cio' },
                    { term: 'Endorses', pos: 'Verb', definition: 'To declare one\'s public approval or support of.', portuguese: 'Apoiar, endossar' }
                ],
                discussion: 'How important are unannounced visits and public rallies in modern political campaigning?'
            },
            {
                id: 7,
                topic: 'Policy',
                original: 'Ministra da Governan√ßa Digital tira licen√ßa maternidade; Pol√≠tica de IA em espera',
                simplified: 'Minister of Digital Governance Takes Maternity Leave; AI Policy on Hold',
                summaryShort: 'Albania‚Äôs Minister of Digital **Governance**, known for her work on AI policy, has begun **maternity** leave. Her **portfolio** will temporarily be handled by a **successor**.',
                summaryFull: 'The minister‚Äôs absence means that several key legislative initiatives, including a bill regulating algorithmic transparency, will be placed on hold until her return. A temporary successor has been appointed to ensure the continuation of daily ministerial functions.',
                image: 'https://placehold.co/400x200/312e81/eef2ff?text=Digital+Governance',
                vocab: [
                    { term: 'Governance', pos: 'Noun', definition: 'The action or manner of governing a state, organization, or policy field.', portuguese: 'Governan√ßa' },
                    { term: 'Maternity', pos: 'Adjective', definition: 'Relating to motherhood or the period before and after childbirth.', portuguese: 'Maternidade' },
                    { term: 'Portfolio', pos: 'Noun', definition: 'A range of investments, or the responsibilities and duties of a government minister.', portuguese: 'Portf√≥lio, pasta' },
                    { term: 'Successor', pos: 'Noun', definition: 'A person or thing that succeeds another.', portuguese: 'Sucessor' }
                ],
                discussion: 'What are the challenges for a government when key policy initiatives are paused due to personal leave?'
            },
            {
                id: 8,
                topic: 'Policy/Economy',
                original: 'Especialista em √âtica de IA Tilly Norwood pede padr√µes regulat√≥rios globais',
                simplified: 'AI Ethicist Tilly Norwood Calls for Global Regulatory Standards',
                summaryShort: 'Prominent AI **ethicist** Tilly Norwood argues that the rapid development of generative AI requires international **regulatory** **standards** to ensure **transparency** and public trust.',
                summaryFull: 'In a new white paper, Norwood highlights the dangers of unchecked AI development, specifically pointing to issues of bias and accountability. She proposes a global framework that mandates transparency in training data and model deployment.',
                image: 'https://placehold.co/400x200/0e7490/e0f7fa?text=AI+Ethics',
                vocab: [
                    { term: 'Ethicist', pos: 'Noun', definition: 'A person who studies or practices moral philosophy or ethical conduct.', portuguese: 'Especialista em √©tica' },
                    { term: 'Regulatory', pos: 'Adjective', definition: 'Relating to the control of an activity or process, usually by rules.', portuguese: 'Regulat√≥rio' },
                    { term: 'Standards', pos: 'Noun', definition: 'A required or established level of quality or attainment.', portuguese: 'Padr√µes, normas' },
                    { term: 'Transparency', pos: 'Noun', definition: 'The condition of being clear and easily understood.', portuguese: 'Transpar√™ncia' }
                ],
                discussion: 'Is it feasible to create and enforce a single global standard for AI regulation?'
            }
        ];

        // --- VOCABULARY QUIZ DATA ---
        // Words for Drag and Drop
        const DRAGGABLE_WORDS = [
            'Sustainability', 'Ambition', 'Ceasefire', 'Endorses', 'Concerns', 'Framework', 'Maternity', 'Rally'
        ];
        
        // Fill-in-the-Blanks Sentences: Use [WORD] as the placeholder for the correct answer
        const FILL_IN_BLANKS_QUIZ = [
            { sentence: "The political party officially [ENDORSES] the candidate for the upcoming election.", answer: "endorses" },
            { sentence: "Protecting the environment is key to long-term economic [SUSTAINABILITY].", answer: "sustainability" },
            { sentence: "The bank's decision to hold the rate was due to growing [CONCERNS] about inflation.", answer: "concerns" },
            { sentence: "After weeks of intense [NEGOTIATIONS], a temporary [CEASEFIRE] was agreed upon.", answer: "negotiations" } // Note: Only one word will be asked for fill-in per sentence
        ];

        // Drag-and-Drop Sentences: Use {WORD} as the placeholder for the correct answer
        const DRAG_AND_DROP_QUIZ = [
            { sentence: "The Minister took a six-month {MATERNITY} leave.", answer: "Maternity" },
            { sentence: "The new {FRAMEWORK} sets limits on public spending.", answer: "Framework" },
            { sentence: "The president will host a large political {RALLY} this weekend.", answer: "Rally" }
        ];

        let currentView = 'dashboard';
        let headlineData = NEWS_DATA; // Use a copy for filtering
        let chartInstance = null;
        let score = { correct: 0, total: 0 };
        let activeFilter = 'All';

        // --- INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            updateStats();
            changeView('dashboard');
        });

        // --- NAVIGATION ---
        function changeView(view, context = null) {
            currentView = view;
            const views = document.querySelectorAll('.view-content');
            views.forEach(v => v.classList.add('hidden'));

            const navButtons = document.querySelectorAll('.nav-button');
            navButtons.forEach(b => b.classList.remove('active-nav-button'));

            document.getElementById(`${view}-view`).classList.remove('hidden');

            const activeBtn = document.querySelector(`.nav-button[onclick="changeView('${view}')"]`);
            if (activeBtn) {
                activeBtn.classList.add('active-nav-button');
            }

            // Update Header and trigger content loading
            if (view === 'dashboard') {
                updateHeader('Dashboard Overview', 'Interactive Learning Hub');
            } else if (view === 'headlines') {
                updateHeader('Headlines Explorer', 'Filter by Topic and dive into simplified reports.');
                loadHeadlines(context || 'All');
            } else if (view === 'vocab') {
                updateHeader('Vocabulary Hub', 'Analyze and review all terms from the weekly digest.');
                loadVocabHub();
            } else if (view === 'quizzes') {
                updateHeader('Practice Quizzes', 'Test your knowledge on vocabulary and concepts.');
                loadQuizzes(context);
            }
        }

        function updateHeader(main, sub) {
            document.getElementById('main-title').textContent = main;
            document.getElementById('sub-title').textContent = sub;
        }
        
        function updateStats() {
            document.getElementById('stat-read').textContent = NEWS_DATA.length;
            document.getElementById('stat-vocab').textContent = getUniqueVocab().length;
            document.getElementById('stat-score').textContent = `${score.correct} / ${score.total}`;
        }

        // --- HEADLINES VIEW LOGIC ---
        function loadHeadlines(filterTopic) {
            activeFilter = filterTopic;
            const grid = document.getElementById('headlines-grid');
            grid.innerHTML = '';
            
            const filteredData = filterTopic === 'All' 
                ? NEWS_DATA 
                : NEWS_DATA.filter(item => item.topic.includes(filterTopic));

            filteredData.forEach(item => {
                grid.innerHTML += createHeadlineCard(item);
            });

            // Update filter buttons appearance
            document.querySelectorAll('.filter-button').forEach(btn => {
                btn.classList.remove('active-filter-button');
                if (btn.textContent.includes(filterTopic) || (filterTopic === 'All' && btn.textContent.includes('All Topics'))) {
                    btn.classList.add('active-filter-button');
                }
            });
        }

        function filterHeadlines(topic) {
            loadHeadlines(topic);
        }

        function createHeadlineCard(item) {
            return `
                <div class="bg-white rounded-xl shadow-md overflow-hidden transition duration-200 hover:shadow-xl border border-gray-100" data-topic="${item.topic}">
                    <img src="${item.image}" alt="${item.simplified}" class="w-full h-32 object-cover">
                    <div class="p-4">
                        <span class="text-xs font-semibold px-2 py-0.5 rounded-full bg-sky-100 text-sky-700">${item.topic}</span>
                        <h4 class="text-xl font-bold text-stone-800 mt-2">${item.simplified}</h4>
                        <p class="text-sm text-stone-600 my-3">${item.summaryShort}</p>
                        
                        <details class="text-sm">
                            <summary class="font-semibold text-teal-600 cursor-pointer hover:text-teal-700">Full Summary & Discussion</summary>
                            <div class="mt-2 pt-2 border-t border-gray-100 space-y-2">
                                <p class="text-stone-700 italic">${item.summaryFull}</p>
                                <p class="font-semibold text-stone-800 pt-1">Discussion Prompt:</p>
                                <p class="text-stone-700">${item.discussion}</p>
                            </div>
                        </details>
                    </div>
                </div>
            `;
        }
        
        // --- VOCAB HUB LOGIC ---
        function getUniqueVocab() {
            const vocabMap = new Map();
            NEWS_DATA.forEach(item => {
                item.vocab.forEach(v => {
                    const key = v.term.toLowerCase();
                    if (!vocabMap.has(key)) {
                        vocabMap.set(key, v);
                    }
                });
            });
            return Array.from(vocabMap.values()).sort((a, b) => a.term.localeCompare(b.term));
        }

        function loadVocabHub() {
            const uniqueVocab = getUniqueVocab();
            updateVocabTable(uniqueVocab);
            renderVocabChart(uniqueVocab);
            updateStats(); // Update stats in case it hasn't been done
        }

        function updateVocabTable(vocab) {
            const tbody = document.getElementById('vocab-table-body');
            tbody.innerHTML = '';
            vocab.forEach(v => {
                tbody.innerHTML += `
                    <tr>
                        <td class="px-3 py-2 whitespace-nowrap font-medium text-stone-900">${v.term}</td>
                        <td class="px-3 py-2 whitespace-nowrap">
                            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800">${v.pos}</span>
                        </td>
                        <td class="px-3 py-2 text-sm text-stone-600">${v.definition} (${v.portuguese})</td>
                    </tr>
                `;
            });
        }

        function renderVocabChart(vocab) {
            if (chartInstance) {
                chartInstance.destroy();
            }

            const posCounts = vocab.reduce((acc, v) => {
                acc[v.pos] = (acc[v.pos] || 0) + 1;
                return acc;
            }, {});

            const labels = Object.keys(posCounts);
            const data = Object.values(posCounts);

            const ctx = document.getElementById('vocabChart').getContext('2d');
            chartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Terms by Part of Speech',
                        data: data,
                        backgroundColor: [
                            '#0d9488', // Teal
                            '#0ea5e9', // Sky
                            '#f59e0b', // Amber
                            '#ef4444', // Red
                            '#10b981'  // Emerald
                        ],
                        borderColor: '#fff',
                        borderWidth: 1,
                        borderRadius: 5,
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        title: {
                            display: true,
                            text: 'Part of Speech Frequency',
                            font: { size: 16 }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'Count' },
                            ticks: {
                                precision: 0
                            }
                        },
                        x: {
                            title: { display: true, text: 'Part of Speech (POS)' }
                        }
                    }
                }
            });
        }

        // --- QUIZ LOGIC ---
        function loadQuizzes(focus) {
            loadFillInBlanks();
            loadDragAndDrop();
            
            // Highlight the relevant section if context is provided
            document.getElementById('fill-in-blanks').classList.remove('hidden');
            document.getElementById('drag-drop').classList.remove('hidden');

            if (focus === 'fill-in') {
                document.getElementById('fill-in-blanks').scrollIntoView({ behavior: 'smooth' });
            } else if (focus === 'drag-drop') {
                document.getElementById('drag-drop').scrollIntoView({ behavior: 'smooth' });
            }
        }
        
        // Modal functions
        function openModal(id) {
            const modal = document.getElementById(id);
            const content = document.getElementById(`${id}Content`);
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            setTimeout(() => {
                content.classList.remove('scale-95', 'opacity-0');
                content.classList.add('scale-100', 'opacity-100');
            }, 10);
        }

        function closeModal(id) {
            const modal = document.getElementById(id);
            const content = document.getElementById(`${id}Content`);
            content.classList.remove('scale-100', 'opacity-100');
            content.classList.add('scale-95', 'opacity-0');
            setTimeout(() => {
                modal.classList.remove('flex');
                modal.classList.add('hidden');
            }, 300); // Wait for transition to finish
        }

        // --- QUIZ 1: FILL IN THE BLANKS ---
        function loadFillInBlanks() {
            const container = document.getElementById('fill-in-sentences');
            container.innerHTML = FILL_IN_BLANKS_QUIZ.map((q, index) => {
                const sentenceHtml = q.sentence.replace(/\[([^\]]+)\]/g, 
                    `<input type="text" id="fill-in-${index}" data-correct="${q.answer.toLowerCase()}" class="border border-gray-300 rounded-md p-1 text-sm focus:ring-teal-500 focus:border-teal-500" style="width: 100px;">`
                );
                return `<p id="fill-in-p-${index}">${index + 1}. ${sentenceHtml}</p>`;
            }).join('');
        }

        function checkFillInBlanks() {
            let correctCount = 0;
            let totalCount = 0;
            FILL_IN_BLANKS_QUIZ.forEach((q, index) => {
                totalCount++;
                const input = document.getElementById(`fill-in-${index}`);
                const parent = document.getElementById(`fill-in-p-${index}`);
                
                const userAnswer = input.value.trim().toLowerCase();
                const correctAnswer = input.dataset.correct.toLowerCase();

                parent.classList.remove('text-red-600', 'text-green-600');
                input.classList.remove('border-red-500', 'border-green-500');

                if (userAnswer === correctAnswer) {
                    correctCount++;
                    parent.classList.add('text-green-600');
                    input.classList.add('border-green-500');
                } else if (userAnswer !== '') {
                    parent.classList.add('text-red-600');
                    input.classList.add('border-red-500');
                }
            });
            
            score.correct += correctCount;
            score.total += totalCount;
            updateStats();
            showMessage(`You scored ${correctCount} out of ${totalCount} on the Fill-in-the-Blanks Quiz!`);
        }

        function resetFillInBlanks() {
            FILL_IN_BLANKS_QUIZ.forEach((q, index) => {
                const input = document.getElementById(`fill-in-${index}`);
                const parent = document.getElementById(`fill-in-p-${index}`);
                
                input.value = '';
                parent.classList.remove('text-red-600', 'text-green-600');
                input.classList.remove('border-red-500', 'border-green-500');
            });
        }

        // --- QUIZ 2: DRAG AND DROP ---
        function loadDragAndDrop() {
            const wordsContainer = document.getElementById('draggable-words');
            wordsContainer.innerHTML = '';
            // Shuffle words for variety
            const shuffledWords = DRAGGABLE_WORDS.sort(() => Math.random() - 0.5);

            shuffledWords.forEach((word) => {
                wordsContainer.innerHTML += `
                    <div class="draggable bg-white py-1 px-3 rounded-md shadow-sm border border-gray-300 text-stone-800 font-medium text-sm transition hover:bg-sky-50"
                         draggable="true" data-word="${word}" ondragstart="dragStart(event)">${word}</div>
                `;
            });

            const sentencesContainer = document.getElementById('drag-drop-sentences');
            sentencesContainer.innerHTML = DRAG_AND_DROP_QUIZ.map((q, index) => {
                const sentenceHtml = q.sentence.replace(/{([^}]+)}/g, 
                    `<div id="drop-area-${index}" data-correct="${q.answer}" ondragover="dragOver(event)" ondrop="drop(event)" class="dropping-area bg-gray-50 border-gray-400 hover:bg-sky-100 transition-colors"><span>Drop Word Here</span></div>`
                );
                return `<p id="drag-drop-p-${index}">${index + 1}. ${sentenceHtml}</p>`;
            }).join('');
        }

        function dragStart(e) {
            e.dataTransfer.setData('text/plain', e.target.dataset.word);
            setTimeout(() => {
                e.target.classList.add('opacity-50');
            }, 0);
        }

        function dragOver(e) {
            e.preventDefault(); // Allows drop
        }

        function drop(e) {
            e.preventDefault();
            const word = e.dataTransfer.getData('text/plain');
            const draggable = document.querySelector(`[data-word="${word}"]`);
            
            // Check if the drop target is an empty dropping area
            if (e.target.classList.contains('dropping-area') && e.target.children.length === 1 && e.target.children[0].tagName === 'SPAN') {
                e.target.innerHTML = ''; // Clear the "Drop Word Here" text
                e.target.appendChild(draggable);
                draggable.classList.remove('opacity-50');
            } else if (e.target.tagName === 'P' && e.target.closest('.dropping-area')) {
                 // Handle drop on the word itself if it's already in the drop area
                 const dropArea = e.target.closest('.dropping-area');
                 if (dropArea.children.length === 0) {
                     dropArea.appendChild(draggable);
                     draggable.classList.remove('opacity-50');
                 }
            } else {
                 // If dropped anywhere else, return it to the original list
                 const originalContainer = document.getElementById('draggable-words');
                 if (!originalContainer.contains(draggable)) {
                     originalContainer.appendChild(draggable);
                     draggable.classList.remove('opacity-50');
                 }
            }
        }

        function checkDragAndDrop() {
            let correctCount = 0;
            let totalCount = 0;
            DRAG_AND_DROP_QUIZ.forEach((q, index) => {
                totalCount++;
                const dropArea = document.getElementById(`drop-area-${index}`);
                const wordElement = dropArea.querySelector('.draggable');
                
                dropArea.classList.remove('border-red-500', 'border-green-500', 'border-gray-400');

                if (wordElement && wordElement.dataset.word === dropArea.dataset.correct) {
                    correctCount++;
                    dropArea.classList.add('border-green-500');
                    dropArea.classList.remove('bg-gray-50');
                    dropArea.style.backgroundColor = '#d1fae5'; // green-100
                    wordElement.style.pointerEvents = 'none'; // Lock correct answer
                } else {
                    dropArea.classList.add('border-red-500');
                    dropArea.style.backgroundColor = '#fee2e2'; // red-100
                }
            });

            score.correct += correctCount;
            score.total += totalCount;
            updateStats();
            showMessage(`You scored ${correctCount} out of ${totalCount} on the Drag & Drop Quiz!`);
        }
        
        function resetDragAndDrop() {
            loadDragAndDrop(); // Simply re-load the section to reset all elements and colors
        }
        
        // --- CUSTOM MESSAGE BOX (Replaces alert()) ---
        function showMessage(text) {
            const messageBox = document.getElementById('messageBox');
            const messageText = document.getElementById('messageText');
            
            // If the message box doesn't exist (it was in the old file), we need to create it
            // For stability, we assume it is the same simple structure
            if (!messageBox) {
                console.error("Message Box element not found. Cannot show message.");
                return;
            }

            messageText.textContent = text;
            messageBox.classList.remove('hidden');
            messageBox.classList.add('flex');
        }

        function hideMessage() {
            const messageBox = document.getElementById('messageBox');
            messageBox.classList.remove('flex');
            messageBox.classList.add('hidden');
        }

    </script>
    
    <!-- IMPORTANT: Message Box is missing from original provided code. Re-inserting it here to ensure checkMessage functions work and no errors are thrown. -->
    <div id="messageBox" class="fixed inset-0 bg-gray-900 bg-opacity-70 z-50 hidden items-center justify-center p-4">
        <div class="bg-white rounded-xl shadow-2xl p-6 md:p-8 w-full max-w-sm text-center">
            <p id="messageText" class="text-lg font-medium text-stone-800 mb-4"></p>
            <button onclick="hideMessage()" class="py-2 px-4 bg-teal-600 text-white font-semibold rounded-lg hover:bg-teal-700 transition duration-150 shadow-md">OK</button>
        </div>
    </div>
</body>
</html>
